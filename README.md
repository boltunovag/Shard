# ะะพะผะฐัะฝะตะต ะทะฐะดะฐะฝะธะต ะบ ะทะฐะฝััะธั "`ะจะฐัะดะธะฝะณ`" - `ะะพะปััะฝะพะฒ ะะปะตะบัะตะน`


### ะะฝััััะบัะธั ะฟะพ ะฒัะฟะพะปะฝะตะฝะธั ะดะพะผะฐัะฝะตะณะพ ะทะฐะดะฐะฝะธั

   1. ะกะดะตะปะฐะนัะต `fork` ะดะฐะฝะฝะพะณะพ ัะตะฟะพะทะธัะพัะธั ะบ ัะตะฑะต ะฒ Github ะธ ะฟะตัะตะธะผะตะฝัะนัะต ะตะณะพ ะฟะพ ะฝะฐะทะฒะฐะฝะธั ะธะปะธ ะฝะพะผะตัั ะทะฐะฝััะธั, ะฝะฐะฟัะธะผะตั, https://github.com/ะธะผั-ะฒะฐัะตะณะพ-ัะตะฟะพะทะธัะพัะธั/git-hw ะธะปะธ  https://github.com/ะธะผั-ะฒะฐัะตะณะพ-ัะตะฟะพะทะธัะพัะธั/7-1-ansible-hw).
   2. ะัะฟะพะปะฝะธัะต ะบะปะพะฝะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝะพะณะพ ัะตะฟะพะทะธัะพัะธั ะบ ัะตะฑะต ะฝะฐ ะะ ั ะฟะพะผะพััั ะบะพะผะฐะฝะดั `git clone`.
   3. ะัะฟะพะปะฝะธัะต ะดะพะผะฐัะฝะตะต ะทะฐะดะฐะฝะธะต ะธ ะทะฐะฟะพะปะฝะธัะต ั ัะตะฑั ะปะพะบะฐะปัะฝะพ ััะพั ัะฐะนะป README.md:
      - ะฒะฟะธัะธัะต ะฒะฒะตััั ะฝะฐะทะฒะฐะฝะธะต ะทะฐะฝััะธั ะธ ะฒะฐัั ัะฐะผะธะปะธั ะธ ะธะผั
      - ะฒ ะบะฐะถะดะพะผ ะทะฐะดะฐะฝะธะธ ะดะพะฑะฐะฒััะต ัะตัะตะฝะธะต ะฒ ััะตะฑัะตะผะพะผ ะฒะธะดะต (ัะตะบัั/ะบะพะด/ัะบัะธะฝัะพัั/ัััะปะบะฐ)
      - ะดะปั ะบะพััะตะบัะฝะพะณะพ ะดะพะฑะฐะฒะปะตะฝะธั ัะบัะธะฝัะพัะพะฒ ะฒะพัะฟะพะปัะทัะนัะตัั [ะธะฝััััะบัะธะตะน "ะะฐะบ ะฒััะฐะฒะธัั ัะบัะธะฝัะพั ะฒ ัะฐะฑะปะพะฝ ั ัะตัะตะฝะธะตะผ](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - ะฟัะธ ะพัะพัะผะปะตะฝะธะธ ะธัะฟะพะปัะทัะนัะต ะฒะพะทะผะพะถะฝะพััะธ ัะทัะบะฐ ัะฐะทะผะตัะบะธ md (ะบะพัะพัะบะพ ะพะฑ ััะพะผ ะผะพะถะฝะพ ะฟะพัะผะพััะตัั ะฒ [ะธะฝััััะบัะธะธ  ะฟะพ MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. ะะพัะปะต ะทะฐะฒะตััะตะฝะธั ัะฐะฑะพัั ะฝะฐะด ะดะพะผะฐัะฝะธะผ ะทะฐะดะฐะฝะธะตะผ ัะดะตะปะฐะนัะต ะบะพะผะผะธั (`git commit -m "comment"`) ะธ ะพัะฟัะฐะฒััะต ะตะณะพ ะฝะฐ Github (`git push origin`);
   5. ะะปั ะฟัะพะฒะตัะบะธ ะดะพะผะฐัะฝะตะณะพ ะทะฐะดะฐะฝะธั ะฟัะตะฟะพะดะฐะฒะฐัะตะปะตะผ ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต ะฟัะธะบัะตะฟะธัะต ะธ ะพัะฟัะฐะฒััะต ัััะปะบั ะฝะฐ ัะตัะตะฝะธะต ะฒ ะฒะธะดะต md-ัะฐะนะปะฐ ะฒ ะฒะฐัะตะผ Github.
   6. ะัะฑัะต ะฒะพะฟัะพัั ะฟะพ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐะฝะธะน ัะฟัะฐัะธะฒะฐะนัะต ะฒ ัะฐัะต ััะตะฑะฝะพะน ะณััะฟะฟั ะธ/ะธะปะธ ะฒ ัะฐะทะดะตะปะต โะะพะฟัะพัั ะฟะพ ะทะฐะดะฐะฝะธัโ ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต.
   
ะะตะปะฐะตะผ ััะฟะตัะพะฒ ะฒ ะฒัะฟะพะปะฝะตะฝะธะธ ะดะพะผะฐัะฝะตะณะพ ะทะฐะดะฐะฝะธั!
   
### ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะผะฐัะตัะธะฐะปั, ะบะพัะพััะต ะผะพะณัั ะฑััั ะฟะพะปะตะทะฝั ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐะฝะธั

1. [ะัะบะพะฒะพะดััะฒะพ ะฟะพ ะพัะพัะผะปะตะฝะธั Markdown ัะฐะนะปะพะฒ](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### ะะฐะดะฐะฝะธะต 1

`ะัะธะฒะตะดะธัะต ะพัะฒะตั ะฒ ัะฒะพะฑะพะดะฝะพะน ัะพัะผะต........`

ะะบัะธะฒะฝัะน Master + ะพะดะธะฝ ะฟะฐััะธะฒะฝัะน Slave 
ะัะฝะพะฒะฝัะต ะฟัะตะธะผััะตััะฒะฐ: 
1. ะะพะฒััะตะฝะธะต ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ 
    ะัะปะธ master ะฒัะนะดะตั ะธะท ัััะพั, slave ะผะพะถะฝะพ ะฒัััะฝัั (ะธะปะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะตัะตะท ัะบัะธะฟัั/ะพัะบะตัััะฐัะพัั) ะฟะพะฒััะธัั ะดะพ ะฝะพะฒะพะณะพ masterโะฐ.
    ะญัะพ ะพะฑะตัะฟะตัะธะฒะฐะตั ัะตะทะตัะฒะฝัั ะบะพะฟะธั "ะฝะฐ ะณะพััััั" โ ะดะฐะฝะฝัะต ะฝะต ัะตัััััั (ะฟัะธ ะบะพััะตะบัะฝะพะน ะฝะฐัััะพะนะบะต ัะตะฟะปะธะบะฐัะธะธ).
     
2. ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต ะฑะตะท ะฝะฐะณััะทะบะธ ะฝะฐ ะพัะฝะพะฒะฝะพะน ัะตัะฒะตั 
    ะัะบะฐะฟั ะผะพะถะฝะพ ัะฝะธะผะฐัั ัะพ slaveโะฐ โ ััะพ ะฝะต ะฝะฐะณััะถะฐะตั master, ะฝะต ะทะฐะผะตะดะปัะตั ะพะฟะตัะฐัะธะธ ะทะฐะฟะธัะธ ะธ ะฝะต ะฑะปะพะบะธััะตั ัะฐะฑะปะธัั.
     
3. ะขะตััะธัะพะฒะฐะฝะธะต ะธ ะพัะปะฐะดะบะฐ 
    ะะฐ slave ะผะพะถะฝะพ ะฑะตะทะพะฟะฐัะฝะพ ัะตััะธัะพะฒะฐัั ะพะฑะฝะพะฒะปะตะฝะธั ััะตะผั, ะธะฝะดะตะบัั, ะทะฐะฟัะพัั โ ะฑะตะท ัะธัะบะฐ ะฟะพะฒัะตะดะธัั production-ะดะฐะฝะฝัะต.    

4. ะัะพััะพัะฐ ะฝะฐัััะพะนะบะธ ะธ ัะฟัะฐะฒะปะตะฝะธั 
    ะััะธัะตะบัััะฐ ั ะพะดะฝะธะผ slave ะฟัะพัะต ะฒ ะฐะดะผะธะฝะธัััะธัะพะฒะฐะฝะธะธ, ะผะพะฝะธัะพัะธะฝะณะต ะธ ะพัะปะฐะดะบะต โ ะฟะพะดัะพะดะธั ะดะปั ะฝะตะฑะพะปััะธั ะธ ััะตะดะฝะธั ะฟัะพะตะบัะพะฒ.
    
Master + ะฝะตัะบะพะปัะบะพ Slave-ัะตัะฒะตัะพะฒ 
ะัะฝะพะฒะฝัะต ะฟัะตะธะผััะตััะฒะฐ: 
1. ะะพัะธะทะพะฝัะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ััะตะฝะธั 
    ะะพะถะฝะพ ัะฐัะฟัะตะดะตะปะธัั ะฝะฐะณััะทะบั ััะตะฝะธั ะผะตะถะดั ะฝะตัะบะพะปัะบะธะผะธ slave-ัะตัะฒะตัะฐะผะธ.
    ะะฐะฟัะธะผะตั: 90% ะทะฐะฟัะพัะพะฒ โ SELECT โ ะฝะฐะฟัะฐะฒะปัะตะผ ะธั ะฝะฐ 3-5 slaveโะพะฒ โ master ะพััะฐัััั ัะฒะพะฑะพะดะตะฝ ะดะปั ะทะฐะฟะธัะธ โ ะพะฑัะฐั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ัะธััะตะผั ัะฐัััั.
     
2. ะะตะพะณัะฐัะธัะตัะบะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต 
    Slaveโั ะผะพะถะฝะพ ัะฐะทะผะตััะธัั ะฒ ัะฐะทะฝัั ะดะฐัะฐ-ัะตะฝััะฐั ะธะปะธ ัะตะณะธะพะฝะฐั:
        ะะพะปัะทะพะฒะฐัะตะปะธ ะฒ ะะฒัะพะฟะต ัะธัะฐัั ะธะท ะตะฒัะพะฟะตะนัะบะพะณะพ slave.
        ะะพะปัะทะพะฒะฐัะตะปะธ ะฒ ะะทะธะธ โ ะธะท ะฐะทะธะฐััะบะพะณะพ.
        ะญัะพ ัะฝะธะถะฐะตั latency ะธ ัะปัััะฐะตั UX.        
    
3. ะะพะฒััะตะฝะฝะฐั ะพัะบะฐะทะพัััะพะนัะธะฒะพััั 
    ะัะปะธ ะพะดะธะฝ slave ัะฟะฐะดัั โ ะพััะฐะปัะฝัะต ะฟัะพะดะพะปะถะฐั ัะฐะฑะพัะฐัั.
    ะะพะถะฝะพ ะฝะฐัััะพะธัั ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะบะปััะตะฝะธะต ะฝะฐ ะดััะณะพะน slave ะฟัะธ ะฐะฒะฐัะธะธ.
    
4. ะกะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะต slaveโั 
    ะะดะธะฝ slave โ ะดะปั ะพััััะพะฒ ะธ ะฐะฝะฐะปะธัะธะบะธ (ััะถัะปัะต ะทะฐะฟัะพัั).
    ะัะพัะพะน โ ะดะปั API ะธ ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ะทะฐะฟัะพัะพะฒ (ะปัะณะบะธะต SELECT).
    ะขัะตัะธะน โ ัะพะปัะบะพ ะดะปั ะฑัะบะฐะฟะพะฒ.
    ะญัะพ ะฟะพะทะฒะพะปัะตั ะพะฟัะธะผะธะทะธัะพะฒะฐัั ัะตััััั ะฟะพะด ะทะฐะดะฐัะธ.
    
5. ะะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะธ ะฐะฝะฐะปะธัะธะบะฐ 
    ะะดะธะฝ ะธะท slaveโะพะฒ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะดะปั ะทะฐะฟััะบะฐ ัะตััััะพัะผะบะธั ะฐะฝะฐะปะธัะธัะตัะบะธั ะทะฐะฟัะพัะพะฒ, ะฝะต ะฒะปะธัั ะฝะฐ ะพัะฝะพะฒะฝัั ัะธััะตะผั.
     

---

### ะะฐะดะฐะฝะธะต 2

ะะตััะธะบะฐะปัะฝัะน ัะฐัะดะธะฝะณ 


ะะฐะทะดะตะปะธะผ ัะธััะตะผั ะฝะฐ ััะธ ััะฝะบัะธะพะฝะฐะปัะฝัะต ะทะพะฝั, ะบะฐะถะดะฐั ัะพ ัะฒะพะตะน ะะ ะธ ัะตัะฒะตัะพะผ: 

<table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; font-family: Arial, sans-serif;">
  <thead>
    <tr style="background-color: #f2f2f2;">
      <th style="text-align: left; padding: 8px;">ะกะตัะฒะตั</th>
      <th style="text-align: left; padding: 8px;">ะะฐะทะฐ ะดะฐะฝะฝัั</th>
      <th style="text-align: left; padding: 8px;">ะขะฐะฑะปะธัั</th>
      <th style="text-align: left; padding: 8px;">ะะฐะทะฝะฐัะตะฝะธะต</th>
      <th style="text-align: left; padding: 8px;">ะะตะถะธะผ ัะฐะฑะพัั</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 8px;">Auth/User Server</td>
      <td style="padding: 8px;">user_db</td>
      <td style="padding: 8px;">ะฟะพะปัะทะพะฒะฐัะตะปะธ</td>
      <td style="padding: 8px;">ะะฒัะพัะธะทะฐัะธั, ะฟัะพัะธะปะธ, ะฟะตััะพะฝะฐะปะธะทะฐัะธั</td>
      <td style="padding: 8px;">Master + Read Replicas (ะตัะปะธ ะฝัะถะฝะพ ะผะฐัััะฐะฑะธัะพะฒะฐัั ััะตะฝะธะต)</td>
    </tr>
    <tr>
      <td style="padding: 8px;">Catalog Server</td>
      <td style="padding: 8px;">catalog_db</td>
      <td style="padding: 8px;">ะบะฝะธะณะธ</td>
      <td style="padding: 8px;">ะะฐัะฐะปะพะณ ัะพะฒะฐัะพะฒ, ะฟะพะธัะบ, ัะธะปัััะฐัะธั</td>
      <td style="padding: 8px;">Master + ะฝะตัะบะพะปัะบะพ Slaves (ััะตะฝะธะต ัะธะปัะฝะพ ะฝะฐะณััะถะตะฝะพ)</td>
    </tr>
    <tr>
      <td style="padding: 8px;">Stores Server</td>
      <td style="padding: 8px;">stores_db</td>
      <td style="padding: 8px;">ะผะฐะณะฐะทะธะฝั</td>
      <td style="padding: 8px;">ะะฝัะพัะผะฐัะธั ะพ ัะพัะบะฐั ะฟัะพะดะฐะถ, ะปะพะบะฐัะธะธ</td>
      <td style="padding: 8px;">Master (ะผะพะถะฝะพ ั 1 Slave ะดะปั ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ)</td>
    </tr>
  </tbody>
</table> 

    ะะฐะถะดัะน ัะตัะฒะตั ะพะฑัะปัะถะธะฒะฐะตั ัะฒะพั ะฑะธะทะฝะตั-ะปะพะณะธะบั โ ะฟัะพัะต ะผะฐัััะฐะฑะธัะพะฒะฐัั, ะพะฑะฝะพะฒะปััั, ะผะพะฝะธัะพัะธัั.
    ะกะฝะธะถะฐะตััั ะบะพะฝะบััะตะฝัะธั ะทะฐ ัะตััััั: ะทะฐะฟัะพัั ะฝะฐ ะบะฝะธะณะธ ะฝะต ะฒะปะธััั ะฝะฐ ะฐะฒัะพัะธะทะฐัะธั.
    ะัะพัะต ะฝะฐัััะฐะธะฒะฐัั ัะตะฟะปะธะบะฐัะธั ะธ ะฑัะบะฐะฟั ะฟะพะด ะบะพะฝะบัะตัะฝัั ะฝะฐะณััะทะบั.
     

 
ะงะฐััั 2: ะะพัะธะทะพะฝัะฐะปัะฝัะน ัะฐัะดะธะฝะณ (ัะฐะทะดะตะปะตะฝะธะต ัััะพะบ) 

     

 
๐น ะัะธะผะตั 1: ะะพัะธะทะพะฝัะฐะปัะฝัะน ัะฐัะดะธะฝะณ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะธ 

ะะปัั ัะฐัะดะธะฝะณะฐ: user_id ะธะปะธ region 

ะฅะตัะธัะพะฒะฐะฝะธะต ะฟะพ user_id % N ะธะปะธ ะฟะพ ัะตะณะธะพะฝั. 

<table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; font-family: Arial, sans-serif; margin-top: 20px;">
  <thead>
    <tr style="background-color: #f2f2f2;">
      <th style="text-align: left; padding: 8px;">ะจะฐัะด</th>
      <th style="text-align: left; padding: 8px;">ะะธะฐะฟะฐะทะพะฝ user_id (mod 4)</th>
      <th style="text-align: left; padding: 8px;">ะกะตัะฒะตั</th>
      <th style="text-align: left; padding: 8px;">ะะฐะทะฐ ะดะฐะฝะฝัั</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 8px;">Shard 0</td>
      <td style="padding: 8px;">user_id % 4 == 0</td>
      <td style="padding: 8px;">user-shard-0</td>
      <td style="padding: 8px;">user_db_shard_0</td>
    </tr>
    <tr>
      <td style="padding: 8px;">Shard 1</td>
      <td style="padding: 8px;">user_id % 4 == 1</td>
      <td style="padding: 8px;">user-shard-1</td>
      <td style="padding: 8px;">user_db_shard_1</td>
    </tr>
    <tr>
      <td style="padding: 8px;">Shard 2</td>
      <td style="padding: 8px;">user_id % 4 == 2</td>
      <td style="padding: 8px;">user-shard-2</td>
      <td style="padding: 8px;">user_db_shard_2</td>
    </tr>
    <tr>
      <td style="padding: 8px;">Shard 3</td>
      <td style="padding: 8px;">user_id % 4 == 3</td>
      <td style="padding: 8px;">user-shard-3</td>
      <td style="padding: 8px;">user_db_shard_3</td>
    </tr>
  </tbody>
</table>
	
   

ะะพัะธะทะพะฝัะฐะปัะฝัะน ัะฐัะดะธะฝะณ ะดะปั ะผะฐะณะฐะทะธะฝั 

ะะปัั ัะฐัะดะธะฝะณะฐ: region (ะณะตะพะณัะฐัะธัะตัะบะธะน) 
<table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; font-family: Arial, sans-serif; margin-top: 20px;">
  <thead>
    <tr style="background-color: #f2f2f2;">
      <th style="text-align: left; padding: 8px;">ะะตะณะธะพะฝ</th>
      <th style="text-align: left; padding: 8px;">ะกะตัะฒะตั</th>
      <th style="text-align: left; padding: 8px;">ะะฐะทะฐ ะดะฐะฝะฝัั</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 8px;">ะะฒัะพะฟะฐ</td>
      <td style="padding: 8px;">stores-eu</td>
      <td style="padding: 8px;">stores_db_eu</td>
    </tr>
    <tr>
      <td style="padding: 8px;">ะะทะธั</td>
      <td style="padding: 8px;">stores-asia</td>
      <td style="padding: 8px;">stores_db_asia</td>
    </tr>
    <tr>
      <td style="padding: 8px;">ะกะตะฒ. ะะผะตัะธะบะฐ</td>
      <td style="padding: 8px;">stores-us</td>
      <td style="padding: 8px;">stores_db_us</td>
    </tr>
    <tr>
      <td style="padding: 8px;">ะะฐั. ะะผะตัะธะบะฐ</td>
      <td style="padding: 8px;">stores-latam</td>
      <td style="padding: 8px;">stores_db_latam</td>
    </tr>
  </tbody>
</table>
ะะพะปัะทะพะฒะฐัะตะปะธ ะธะท ะะฒัะพะฟั ะฒะธะดัั ะผะฐะณะฐะทะธะฝั ะธะท stores_db_eu โ ะฝะธะทะบะฐั ะทะฐะดะตัะถะบะฐ, ะปะพะบะฐะปะธะทะฐัะธั. 

ะัะปะธ ะฟะพะทะถะต ะดะพะฑะฐะฒะธััั ัะฐะฑะปะธัะฐ ะทะฐะบะฐะทั, ะตั ะผะพะถะฝะพ ัะฐัะดะธัะพะฒะฐัั ะฟะพ user_id, ััะพะฑั ะพะฝะฐ ะปะตะถะฐะปะฐ ะฝะฐ ัะพะผ ะถะต ัะฐัะดะต, ััะพ ะธ ะฟะพะปัะทะพะฒะฐัะตะปั โ ััะพ ะพะฑะตัะฟะตัะธั ะปะพะบะฐะปัะฝะพััั ะดะฐะฝะฝัั ะธ ะธะทะฑะตะถะธั cross-shard JOINโะพะฒ. 
 
ะะตะถะธะผั ัะฐะฑะพัั ัะตัะฒะตัะพะฒ 
<table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; font-family: Arial, sans-serif; margin-top: 20px;">
  <thead>
    <tr style="background-color: #f2f2f2;">
      <th style="text-align: left; padding: 8px;">ะกะตัะฒะตั</th>
      <th style="text-align: left; padding: 8px;">ะะตะถะธะผ ัะฐะฑะพัั</th>
      <th style="text-align: left; padding: 8px;">ะะพะผะผะตะฝัะฐัะธะน</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 8px;">user-shard-0..3</td>
      <td style="padding: 8px;">Master (ะทะฐะฟะธัั + ััะตะฝะธะต)</td>
      <td style="padding: 8px;">ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั read-replicas, ะตัะปะธ ะฝะฐะณััะทะบะฐ ะฝะฐ ััะตะฝะธะต ะฒััะพะบะฐั</td>
    </tr>
    <tr>
      <td style="padding: 8px;">catalog_db ัะตัะฒะตั</td>
      <td style="padding: 8px;">Master + ะฝะตัะบะพะปัะบะพ Slaves</td>
      <td style="padding: 8px;">ะะฐัะฐะปะพะณ ะบะฝะธะณ โ ะฒ ะพัะฝะพะฒะฝะพะผ ััะตะฝะธะต โ ะผะฐัััะฐะฑะธััะตะผ ััะตะฝะธะต ัะตัะตะท ัะตะฟะปะธะบะธ</td>
    </tr>
    <tr>
      <td style="padding: 8px;">stores_db ัะตัะฒะตัั</td>
      <td style="padding: 8px;">Master (ะธะปะธ Master + 1 Slave)</td>
      <td style="padding: 8px;">ะะฑะฝะพะฒะปะตะฝะธั ัะตะดะบะธะต โ ะดะพััะฐัะพัะฝะพ ะพะดะฝะพะณะพ Slave ะดะปั ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ</td>
    </tr>
  </tbody>
</table> 
 
 
ะะปะพะบ-ััะตะผะฐ ัะธััะตะผั 
 

                             โโโโโโโโโโโโโโโโโโโโโโโโ
                             โ   Load Balancer /    โ
                             โ   Proxy (Sharding)   โ
                             โโโโโโโโโโโโฌโโโโโโโโโโโโ
                                        โ
                   โโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโ
                   โ                    โ                    โ
         โโโโโโโโโโโผโโโโโโโโโโ โโโโโโโโโโผโโโ โโโโโโ โโโโโโโโโโโผโโโโโโโโโโ
         โ   User Service    โ โ  Catalog Service โ โ   Stores Service  โ
         โ (Sharded by ID)   โ โ (Single DB)      โ โ (Sharded by Region)โ
         โโโโโโโโโโโฌโโโโโโโโโโ โโโโโโโโโโฌโโโโ โโโโโ โโโโโโโโโโโฌโโโโโโโโโโ
                   โ                    โ                     โ
    โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโ     โ     โโโโโโโโโโโโโโ โโผโโโโโโโโโโโโโโโ
    โ              โ              โ     โ     โ               โ              โ
โโโโโผโโโโ      โโโโโผโโโโ      โโโโโผโโโโ โ โโโโโผโโโโ      โโโโโผโโโโ      โโโโโผโโโโ
โShard 0โ      โShard 1โ      โShard 2โ โ โMaster โ      โ EU DB โ      โ US DB โ
โUser DBโ      โUser DBโ      โUser DBโ โ โBooks  โ      โStores โ      โStores โ
โโโโโโโโโ      โโโโโโโโโ      โโโโโโโโโ โ โโโโโฌโโโโ      โโโโโโโโโ      โโโโโโโโโ
                                        โ     โ
                                 โโโโโโโโดโโโโโโดโโโโโโโ
                                 โ Slave 1 โ Slave 2 โ
                                 โ (Read scaling)    โ
                                 โโโโโโโโโโโโโโโโโโโโโ
 
   

ะัะธะฝัะธะฟั ะฟะพัััะพะตะฝะธั ะธ ัะฐะทะณัะฐะฝะธัะตะฝะธั 

    ะคัะฝะบัะธะพะฝะฐะปัะฝะฐั ะดะตะบะพะผะฟะพะทะธัะธั (ะฒะตััะธะบะฐะปัะฝัะน ัะฐัะดะธะฝะณ) โ ัะฐะทะดะตะปัะตะผ ะฟะพ ะฑะธะทะฝะตั-ะดะพะผะตะฝะฐะผ: ะฟะพะปัะทะพะฒะฐัะตะปะธ, ะบะฐัะฐะปะพะณ, ะผะฐะณะฐะทะธะฝั.
    ะะพัะธะทะพะฝัะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะฟะพ ะบะปััั โ ัะฐัะดะธััะตะผ ะฑะพะปััะธะต ัะฐะฑะปะธัั (ะฟะพะปัะทะพะฒะฐัะตะปะธ, ะผะฐะณะฐะทะธะฝั) ะฟะพ ID ะธะปะธ ัะตะณะธะพะฝั.
    ะะพะบะฐะปัะฝะพััั ะดะฐะฝะฝัั โ ัะฒัะทะฐะฝะฝัะต ะดะฐะฝะฝัะต (ะฝะฐะฟัะธะผะตั, ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ะตะณะพ ะทะฐะบะฐะทั) ะดะพะปะถะฝั ะฑััั ะฝะฐ ะพะดะฝะพะผ ัะฐัะดะต.
    ะะทะฑะตะณะฐะฝะธะต cross-shard JOINโะพะฒ โ ะฟัะพะตะบัะธััะตะผ ัะฐะบ, ััะพะฑั ะฑะพะปััะธะฝััะฒะพ ะทะฐะฟัะพัะพะฒ ะฒัะฟะพะปะฝัะปะธัั ะฒ ะฟัะตะดะตะปะฐั ะพะดะฝะพะณะพ ัะฐัะดะฐ.
    ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟัะพะบัะธ/ัะพััะตัะฐ โ ะดะปั ะฟัะพะทัะฐัะฝะพะณะพ ะพะฟัะตะดะตะปะตะฝะธั, ะบ ะบะฐะบะพะผั ัะฐัะดั ะธะดัะธ ะฝะฐ ะพัะฝะพะฒะต ะบะปััะฐ (ะฝะฐะฟัะธะผะตั, user_id).
     
---

